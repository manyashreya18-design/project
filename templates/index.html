<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Phishing Guard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    min-height:100vh;
    font-family:Poppins, sans-serif;
    background:
      radial-gradient(circle at top left,#dbeafe,transparent 45%),
      radial-gradient(circle at bottom right,#ecfeff,transparent 45%),
      linear-gradient(120deg,#f8fafc,#eef2ff);
}

/* MAIN WRAPPER */
.dashboard{
    max-width:1200px;
    margin:auto;
    padding:40px 30px;
    display:grid;
    grid-template-columns: 1fr 1.4fr;
    gap:40px;
}

/* LEFT PANEL */
.panel{
    background:rgba(255,255,255,0.75);
    border-radius:28px;
    padding:40px;
    box-shadow:0 25px 50px rgba(0,0,0,0.08);
}

.panel h1{
    margin-top:0;
    font-size:32px;
}

.panel ul{
    padding-left:18px;
    font-size:17px;
}
.panel li{
    margin:14px 0;
}

/* RIGHT CARD */
.card{
    background:white;
    border-radius:32px;
    padding:45px;
    box-shadow:0 30px 60px rgba(0,0,0,0.12);
}

.card h2{
    font-size:34px;
    margin-top:0;
}

.card p{
    color:#6b7280;
    font-size:16px;
}

input{
    width:100%;
    padding:18px;
    margin-top:20px;
    font-size:18px;
    border-radius:18px;
    border:1px solid #c7d2fe;
}

button{
    width:100%;
    margin-top:20px;
    padding:18px;
    font-size:18px;
    border-radius:18px;
    border:none;
    background:#a5b4fc;
    font-weight:700;
    cursor:pointer;
}

button:hover{opacity:0.9;}

.result{
    margin-top:30px;
    padding:24px;
    border-radius:20px;
    display:none;
}

.safe{background:#ecfdf5;color:#065f46;}
.phish{background:#fff1f2;color:#9f1239;}

.bar{
    height:14px;
    background:#e5e7eb;
    border-radius:20px;
    margin-top:14px;
}
.fill{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#34d399,#f87171);
    transition:0.6s;
}

.conf{
    margin-top:12px;
    font-size:20px;
    font-weight:700;
}

/* POPUP */
.overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.4);
    visibility:hidden;
    opacity:0;
    transition:opacity 0.3s ease;
    display:flex;
    justify-content:center;
    align-items:center;
}
.popup{
    background: white;
    color: #333;
    padding:30px;
    border-radius:20px;
    max-width:350px;
    text-align:center;
    box-shadow:0 20px 40px rgba(0,0,0,0.15);
    transform: scale(0.8);
    transition: transform 0.3s ease;
}
.popup h3{
    margin-top:0;
    font-size:24px;
}
.popup p{
    font-size:16px;
}
.popup button{
    margin-top:20px;
    background:#667eea;
    color:white;
    border: none;
    padding: 12px 24px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.popup button:hover {
    background: #5a67d8;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
</style>
</head>

<body>

<div class="dashboard">

    <!-- LEFT FEATURE PANEL -->
    <div class="panel">
        <h1>üõ°Ô∏è Advanced Phishing Detection</h1>
        <p>A modern AI-powered system to detect and block phishing websites in real time.</p>

        <ul>
            <li>üß† Dual Deep Learning Models</li>
            <li>üìä Confidence-based Risk Scoring</li>
            <li>üîî Smart Warning & Block Popups</li>
            <li>üö´ Automatic Phishing Blocking</li>
            <li>üïò Saved URL Suggestions</li>
            <li>üåê Real-time Website Analysis</li>
        </ul>
    </div>

    <!-- MAIN ANALYZER -->
    <div class="card">
        <h2>Website Analyzer</h2>
        <p>Enter a website URL to check whether it is safe or phishing.</p>

        <input list="savedUrls" id="url" placeholder="Paste or select website URL">
        <datalist id="savedUrls">
            <option value="https://google.com">
            <option value="https://github.com">
            <option value="https://microsoft.com">
            <option value="https://openai.com">
            <option value="https://edunetfoundation.com">
            <option value="https://paypal.com">
            <option value="https://amazon.com">
            <option value="https://facebook.com">
            <option value="https://twitter.com">
            <option value="https://linkedin.com">
        </datalist>

        <button onclick="checkURL()">Analyze Website</button>

        <div class="result" id="result">
            <h3 id="msg"></h3>
            <div class="bar"><div class="fill" id="fill"></div></div>
            <div class="conf" id="confText"></div>
        </div>

        <div class="stats" id="stats" style="margin-top:30px;">
            <h3>System Statistics</h3>
            <p><strong>Total Checks:</strong> <span id="totalChecks">0</span></p>
            <p><strong>Safe URLs:</strong> <span id="safeCount">0</span></p>
            <p><strong>Phishing URLs:</strong> <span id="phishCount">0</span></p>
            <div class="confidence-graph" style="margin-top:20px;">
                <h4>Confidence Distribution</h4>
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span>0-25%</span>
                    <span>26-50%</span>
                    <span>51-75%</span>
                    <span>76-100%</span>
                </div>
                <div style="display:flex; height:100px; align-items:end;">
                    <div id="conf0-25" style="flex:1; background:#34d399; margin:0 2px; height:0%; transition:height 0.5s;"></div>
                    <div id="conf26-50" style="flex:1; background:#fbbf24; margin:0 2px; height:0%; transition:height 0.5s;"></div>
                    <div id="conf51-75" style="flex:1; background:#f87171; margin:0 2px; height:0%; transition:height 0.5s;"></div>
                    <div id="conf76-100" style="flex:1; background:#dc2626; margin:0 2px; height:0%; transition:height 0.5s;"></div>
                </div>
            </div>
        </div>

        <div class="history" id="history" style="margin-top:30px; display:none;">
            <h3>Recent Checks</h3>
            <ul id="historyList" style="list-style:none; padding:0;"></ul>
        </div>
    </div>

</div>

<!-- POPUP -->
<div class="overlay" id="overlay">
    <div class="popup">
        <h3 id="popupTitle"></h3>
        <p id="popupMsg"></p>
        <p><strong id="popupConf"></strong></p>
        <button onclick="closePopup()">OK</button>
    </div>
</div>

<script>
let saved=[];

function closePopup(){
    let overlay = document.getElementById("overlay");
    overlay.style.opacity = "0";
    setTimeout(() => overlay.style.visibility = "hidden", 300);
}

function showPopup(title,msg,conf){
    document.getElementById("popupTitle").innerHTML="‚ö†Ô∏è " + title;
    document.getElementById("popupMsg").innerText=msg;
    document.getElementById("popupConf").innerText="Confidence: "+conf+"%";
    let overlay = document.getElementById("overlay");
    let popup = document.querySelector(".popup");
    overlay.style.visibility = "visible";
    overlay.style.opacity = "1";
    setTimeout(() => popup.style.transform = "scale(1)", 10);
}

function updateSaved(url){
    if(!saved.includes(url)){
        saved.push(url);
        let o=document.createElement("option");
        o.value=url;
        document.getElementById("savedUrls").appendChild(o);
    }
}

function addToHistory(url, status, conf){
    let historyList = document.getElementById("historyList");
    let li = document.createElement("li");
    li.innerHTML = `<strong>${url}</strong> - ${status} (${conf}%)`;
    li.style.marginBottom = "10px";
    li.style.padding = "10px";
    li.style.borderRadius = "10px";
    li.style.background = status === "Safe" ? "#ecfdf5" : "#fff1f2";
    historyList.insertBefore(li, historyList.firstChild);
    document.getElementById("history").style.display = "block";
    if(historyList.children.length > 10) historyList.removeChild(historyList.lastChild);
}

function checkURL(){
    let url=document.getElementById("url").value;
    let res=document.getElementById("result");
    let fill=document.getElementById("fill");
    let msg=document.getElementById("msg");
    let confText=document.getElementById("confText");

    res.style.display="block";
    msg.innerText="Analyzing website...";
    fill.style.width="0%";

    fetch("/check",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({url})
    })
    .then(r=>r.json())
    .then(d=>{
        let c=Math.round(d.confidence*100);
        fill.style.width=c+"%";
        confText.innerText="Confidence Score: "+c+"%";
        updateSaved(url);

        let status = d.status === "safe" ? "Safe" : "Phished";
        addToHistory(url, status, c);

        if(d.status === "safe"){
            res.className="result safe";
            msg.innerText="Safe";
            showPopup("Safe", "This website is safe.", c);
        }else{
            res.className="result phish";
            msg.innerText="Phished";
            showPopup("Phished", "This website is detected as phished.", c);
        }
    });
}
</script>

</body>
</html>
